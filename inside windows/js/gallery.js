(function($){$(function(){var $startX=0,$startMargin=0,$gallery=$("#gallery"),$galleryCon=$("#galleryCon"),$scrollBtn=$("#scrollBtn"),$scrollBg=$("#scrollBg"),$galleryList=$galleryCon.children("li"),$galleryList_len=$galleryList.length,$gallery_width=$gallery.width(),$galleryList_width=$galleryList.outerWidth(true),$galleryList_count=$galleryList_width*$galleryList_len,$scrollbar_wdith=$("#scrollbar").outerWidth(),$scrollBtn_wdith=$scrollBtn.outerWidth(true),$scroll_width=$scrollbar_wdith-$scrollBtn_wdith,$galleryList_max=Math.ceil($galleryList_len-$gallery_width/$galleryList_width);$gallery_index=$gallery[$gallery.index()];$galleryCon.css('width',$galleryList_count);function scrollTo(distance){if(distance<0)distance=0;if(distance>$scroll_width)distance=$scroll_width;var pos=-Math.ceil((distance/$scroll_width)*($galleryList_count-$gallery_width));$galleryCon.css('marginLeft',pos);$scrollBtn.css('marginLeft',distance);$scrollBg.css('width',distance);}$scrollBtn.on('mousedown',function(e){var $startX=e.clientX,$startMargin=parseInt($scrollBtn.css('marginLeft').replace('px',''));e.preventDefault();$(document).on('mousemove',function(e){var distance=e.clientX-$startX+$startMargin;scrollTo(distance);window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();window.event.returnValue=false;}).on('mouseup',function(){$(this).off('mousemove');});});var $step=0,$prevBtn=$("#prevBtn"),$nextBtn=$("#nextBtn");function prevScroll(){if(!$galleryCon.is(":animated")){$step=-parseInt($galleryCon.css("marginLeft"))/$galleryList_width;if($step>0){$step--
barScrollTo($galleryList_max,$step);}}}function nextScroll(){if(!$galleryCon.is(":animated")){$step=-parseInt($galleryCon.css("marginLeft"))/$galleryList_width;if($step<$galleryList_max){$step++
barScrollTo($galleryList_max,$step);};}}$prevBtn.click(function(){prevScroll();});$nextBtn.click(function(){nextScroll();});function barScrollTo(over,step){var posBtn=Math.ceil($scroll_width/over*step);var posArea=-Math.ceil(($galleryList_count-$gallery_width)/over*step);$scrollBtn.animate({'marginLeft':posBtn});$scrollBg.animate({'width':posBtn});$galleryCon.animate({'marginLeft':posArea});}function mousewheel(e){var e=e||window.event,wheelDelta=e.wheelDelta||e.detail;if(wheelDelta==120||wheelDelta==-3){prevScroll();}else if(wheelDelta==-120||wheelDelta==3){nextScroll();}}if($gallery_index.addEventListener){$gallery_index.addEventListener('DOMMouseScroll',mousewheel,false);}$gallery_index.onmousewheel=mousewheel;});}(jQuery));